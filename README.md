Lighthouse Automation Script
Version 1.3.1
Created by Jarod Day

Usage:
npm run audit-all
npm run audit-single
npm run compare
npm run report

Dev Dependencies:
    - chrome-launcher
    - lighthouse

Dependencies:
    - p-limit
    - child_process
    - puppeteer
    - url

This script parses all of the paths contained in wikiPaths.txt to create a array of paths proceeding the extension https://www.familysearch.org/en/wiki/. The script automates each page using the paths to create a full URL to access the page, and creates a custom-made json file containing audit results of each page listed in the .txt file.

Descriptions of each script command (refer to package.json to see all of the information pertaining to what files are being executed)

audit-all: Each audit takes the full url generated by the initial script, opens a headless chrome window, navigates to that url, and enacts a lighthouse audit, focusing only on accessibility, and returns the audit. The script next extracts all relevant data from the returned json object and returns a new json object containing only what's relevant. This json object is written to the audit-results folder, where it's given the name of the path.

audit-single: Takes a single url and produces the json output for that page's report. Used for individual audits and testing.

compare: Compares all audits within old-audit-results to the audits in audit-results and produces a json file in audit-comparisons for each page that details what all were different between audits.

report: Runs a script that loops through all audits and returns their line count, number of items, and number of subItems. This is done to locate pages with disproportionately higher numbers of issues compared to other pages.

Comprehensive walkthrough of code:

When an audit is run, either through audit-all or audit-single, the respective file will call runAndWriteAudit.mjs through the child spawn method, where it starts the file through a command-line prompt. The following functions are then called from their respective .mjs files:

runSingleAudit or runConcurrentAudits -> runAndWriteAudit -> createFinalizedReport -> createReport -> organizeData -> classifyIssue and getAuditAccessibilityData -> (trimAuditData -> extractRelevantItemData) and getRawAuditData -> generatePuppeteerAudit or runLighthouse -> lighthouse, (puppeteer or chrome launcher), url, and estimateConcurrency.

This json object's data will be used to further automate improvements for each of these wiki pages.
